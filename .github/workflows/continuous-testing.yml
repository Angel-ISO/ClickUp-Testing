name: Continuous Testing

on:
  schedule:
    - cron: '0 0 * * 0'   # Sunday 00:00 UTC
    - cron: '0 6 * * 0'   # Sunday 06:00 UTC
    - cron: '0 12 * * 0'  # Sunday 12:00 UTC
    - cron: '0 18 * * 0'  # Sunday 18:00 UTC
    - cron: '0 23 * * 0'  # Sunday 23:00 UTC

jobs:
  test:
    runs-on: ubuntu-latest
    env:
      CLICKUP_TOKEN: ${{ secrets.CLICKUP_TOKEN }}
      CLICKUP_BASE_URL: ${{ secrets.CLICKUP_BASE_URL }}
    steps:
    - uses: actions/checkout@v4
    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'
    - run: npm ci
    - uses: actions/upload-artifact@v4
      if: always()
      with:
        name: test-reports-sunday
        path: |
          reports/junit/junit.xml
          reports/html/
          reports/json/
    - run: npm run test:all-reports